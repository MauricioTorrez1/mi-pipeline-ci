name: Pipeline Completa CI/CD

on: push

jobs:
  # --- ETAPA 1: INTEGRACIÃ“N CONTINUA (CI) ---
  
  ci-test:
    runs-on: ubuntu-latest
    steps:
      - name: Descargar CÃ³digo
        uses: actions/checkout@v6
      
      - name: Instalar Python
        uses: actions/setup-python@v6
        with:
          python-version: '3.13'
          
      - name: Correr Tests
        run: python -m unittest test_calculadora.py

  # --- ETAPA 2: DESPLIEGUE CONTINUO (CD) ---
  
  cd-deploy:
    runs-on: ubuntu-latest
    # 
    # "needs" : "No arranques hasta que 'ci-test' termine con Ã©xito"
    needs: ci-test
    
    steps:
      - name: Descargar CÃ³digo
        uses: actions/checkout@v6

      - name: Simular Despliegue a ProducciÃ³n
        run: |
          echo "ðŸš§ Iniciando protocolo de despliegue..."
          echo "Conectando con el servidor (Simulado)..."
          echo "Copiando archivos..."
          echo "âœ… Â¡Despliegue exitoso! La app ya estÃ¡ online."
